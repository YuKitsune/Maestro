
# Todo
- [X] Tidy up the frontend
  - [X] Back to Home button
  - [X] Artist images
  - [X] Album images
  - [X] Track images (use album image if necessary)
  - [X] ~~Remix-ify~~ Wanted to do a nested route, but remix doesn't support nested index route
  - [x] ~~Theme~~ Too complicated, UI is simple enough
  - [X] Proper tidy up
- [X] Update docker compose file
  - [X] include frontend
  - [X] ~~specify config files for API~~ Just using environment variables
- [ ] Services
  - [X] Fix spotify token expiring every now and then
  - [X] Fix deezer share link
  - [X] Fix Apple Music track artwork
  - [ ] Deep search
    - [ ] When a track has been found
      - [ ] Query other streaming services for the same ISRC code
    - [ ] When an album has been found
      - [ ] Query other streaming services for the same album and artist name
      - [ ] Ensure all track ISRCs match
      - [ ] Create entries for each track too
    - [ ] When an artist has been found
      - [ ] Query other streaming services for the same artist based on name
      - Don't bother creating links for albums and tracks, that would take way too long...
  - [X] Dedicated services API
    - [X] List all available services with logos
  - [X] Use Apple Music private key, team ID and key ID in config instead of token
  - [X] Tidy up regex for better handling

- [X] Error handling
  - [X] Return proper error responses
  - [X] Handle errors on the frontend
  - [X] Back button to home page
  - [X] Report button for a quick GitHub issue

- [X] Logos
  - [X] Figure out how we're gonna do logos

- [X] Logging
- [X] Metrics

- [ ] Deployment
  - [ ] Prepare for Prod
    - [X] Figure out which env vars need to be added to GitHub
      - Database
        - MONGO_INITDB_ROOT_USERNAME
        - MONGO_INITDB_ROOT_PASSWORD
        - MAESTRO_DATABASE
        - MAESTRO_USERNAME
        - MAESTRO_PASSWORD
      - API
        - MAESTRO_DATABASE_USER
        - MAESTRO_DATABASE_PASSWORD
        - MAESTRO_SERVICES_APPLE_MUSIC_TOKEN
        - MAESTRO_SERVICES_SPOTIFY_CLIENT_ID
        - MAESTRO_SERVICES_SPOTIFY_CLIENT_SECRET
      - Github Secrets
        - DATABASE_ROOT_PASSWORD
        - DATABASE_MAESTRO_PASSWORD
        - MAESTRO_SERVICES_APPLE_MUSIC_TOKEN
        - MAESTRO_SERVICES_SPOTIFY_CLIENT_ID
        - MAESTRO_SERVICES_SPOTIFY_CLIENT_SECRET
    - [X] Centralize env vars a bit better, make it easier to work with (readme stuff too)
    - [X] Prod docker compose file
      - [X] Traefik
        - [X] Expose frontend via http://host/
        - [X] Expose API via http://api.host/
        - [X] Fix API -> DB connection 
        - [ ] Prevent access to services directly 
      - [X] Mongo creds
      - [ ] Proper volume configs
      - [X] Log levels
      - [X] Remove monitoring?
    - [X] Optimize API Dockerfile
  - [ ] Pipeline
    - [ ] Build Dockerfiles
    - [X] Upload logos?
    - [ ] Deploy to prod with docker compose https://www.docker.com/blog/how-to-deploy-on-remote-docker-hosts-with-docker-compose/

- [ ] Refactoring
  - [ ] Clean up context usages
  - [ ] Clear up names
  - [ ] Make streaming service configs a bit nicer
  - [ ] Optimize API docker file
  - [ ] Clean up logging
  - [ ] Tidy up ports

- [ ] Todo later
  - [ ] Fix viper not working with environment variables
  - [ ] Get mongo metrics exporting to prometheus
  - [ ] Get maestro logs exporting to loki
  - [ ] Include API route in duration histogram
  - [ ] Analytics (If metrics are showing some growth)

- [ ] More services
  - [ ] Tidal
  - [ ] iHeartRadio
  - [ ] Pandora
  - [ ] Amazon Music
  - [ ] YouTube music
  - [ ] Bandcamp (Maybe)
  - [ ] SoundCloud (Maybe)
